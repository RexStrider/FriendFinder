<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-escores[u]iv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>

    <!-- <link rel="stylesheet" type="text/css" href="/static"> -->

    <script src="https://code.jquery.com/jquery.js"></script>
</head>
<body>

    <section id="match">

    </section>

    <h1>This survey is a work in progress...</h1>

    <form>
        <section>
            <label>Enter your name</label>
            <input type="input" name="name">
        </section>
        <section>
            <label>Upload a picture of yourself</label>
            <input type="text" name="photo">
        </section>
        <section>
            <label>Question 1</label>
            <input type="radio" name="scores[0]" value="1"> 1
            <input type="radio" name="scores[0]" value="2"> 2
            <input type="radio" name="scores[0]" value="3"> 3
            <input type="radio" name="scores[0]" value="4"> 4
            <input type="radio" name="scores[0]" value="5" checked> 5
        </section>
        <section>
            <label>Question 2</label>
            <input type="radio" name="scores[1]" value="1"> 1
            <input type="radio" name="scores[1]" value="2"> 2
            <input type="radio" name="scores[1]" value="3"> 3
            <input type="radio" name="scores[1]" value="4" checked> 4
            <input type="radio" name="scores[1]" value="5"> 5
        </section>
        <section>
            <label>Question 3</label>
            <input type="radio" name="scores[2]" value="1"> 1
            <input type="radio" name="scores[2]" value="2"> 2
            <input type="radio" name="scores[2]" value="3" checked> 3
            <input type="radio" name="scores[2]" value="4"> 4
            <input type="radio" name="scores[2]" value="5"> 5
        </section>
        <section>
            <label>Question 4</label>
            <input type="radio" name="scores[3]" value="1"> 1
            <input type="radio" name="scores[3]" value="2" checked> 2
            <input type="radio" name="scores[3]" value="3"> 3
            <input type="radio" name="scores[3]" value="4"> 4
            <input type="radio" name="scores[3]" value="5"> 5
        </section>
        <section>
            <label>Question 5</label>
            <input type="radio" name="scores[4]" value="1" checked> 1
            <input type="radio" name="scores[4]" value="2"> 2
            <input type="radio" name="scores[4]" value="3"> 3
            <input type="radio" name="scores[4]" value="4"> 4
            <input type="radio" name="scores[4]" value="5"> 5
        </section>
        <section>
            <label>Question 6</label>
            <input type="radio" name="scores[5]" value="1"> 1
            <input type="radio" name="scores[5]" value="2" checked> 2
            <input type="radio" name="scores[5]" value="3"> 3
            <input type="radio" name="scores[5]" value="4"> 4
            <input type="radio" name="scores[5]" value="5"> 5
        </section>
        <section>
            <label>Question 7</label>
            <input type="radio" name="scores[6]" value="1"> 1
            <input type="radio" name="scores[6]" value="2"> 2
            <input type="radio" name="scores[6]" value="3" checked> 3
            <input type="radio" name="scores[6]" value="4"> 4
            <input type="radio" name="scores[6]" value="5"> 5
        </section>
        <section>
            <label>Question 8</label>
            <input type="radio" name="scores[7]" value="1"> 1
            <input type="radio" name="scores[7]" value="2"> 2
            <input type="radio" name="scores[7]" value="3"> 3
            <input type="radio" name="scores[7]" value="4" checked> 4
            <input type="radio" name="scores[7]" value="5"> 5
        </section>
        <section>
            <label>Question 9</label>
            <input type="radio" name="scores[8]" value="1"> 1
            <input type="radio" name="scores[8]" value="2"> 2
            <input type="radio" name="scores[8]" value="3"> 3
            <input type="radio" name="scores[8]" value="4"> 4
            <input type="radio" name="scores[8]" value="5" checked> 5
        </section>
        <section>
            <label>Question 10</label>
            <input type="radio" name="scores[9]" value="1" checked> 1
            <input type="radio" name="scores[9]" value="2"> 2
            <input type="radio" name="scores[9]" value="3"> 3
            <input type="radio" name="scores[9]" value="4"> 4
            <input type="radio" name="scores[9]" value="5"> 5
        </section>
        <section>
            <input type="submit" value="Submit">
        </section>
    </form>

    <script>
        $(`form`).submit( function(event) {
            event.preventDefault();

            console.log($(this).serialize());

            $.ajax({
                url: "/api/friends",
                method: "POST",
                data: $(this).serialize()
            })
            .then(result => {
                console.log(result);

                const header = document.createElement('h1');
                const name = document.createElement('p');
                const image = new Image(200, 200);

                header.textContent = `You've met your match!`;
                name.textContent = result.name;
                image.src = result.photo;

                document.getElementById(`match`)
                .append(header, name, image);
            },
            (jqXHR, status) => {
                console.log(status);
            });
        });
    </script>
</body>
</html>